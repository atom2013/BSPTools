<?xml version="1.0"?>
<FamilyDefinition xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
	<Subfamilies></Subfamilies>
	<CompilationFlags>
		<PreprocessorMacros>
			<string>$$com.sysprogs.bspoptions.wdog$$</string>
		</PreprocessorMacros>
	</CompilationFlags>
	<CoreFramework>		
		<CopyJobs>	
			<CopyJob>
				<SourceFolder>$$BSPGEN:INPUT_DIR$$\platform</SourceFolder>
				<FilesToCopy>-devices\startup.*;-CMSIS\DSP_Lib\*;-CMSIS\Lib\*;*.h;*.c</FilesToCopy>
				<ProjectInclusionMask>devices\*.*;CMSIS\Include\*.*</ProjectInclusionMask>
			</CopyJob>
			<CopyJob>
				<SourceFolder>$$BSPGEN:INPUT_DIR$$\USB</SourceFolder>
				<FilesToCopy>*</FilesToCopy>
				<ProjectInclusionMask>-*</ProjectInclusionMask>
			</CopyJob>
		</CopyJobs>
	</CoreFramework>
	<AdditionalFrameworks>
		<Framework>
			<Name>Kinetis Platform (no RTOS)</Name>
			<ID>com.sysprogs.arm.kinetis.platform</ID>
			<IncompatibleFrameworks>
				<string>com.sysprogs.arm.kinetis.freertos</string>
				<string>com.sysprogs.arm.kinetis.mqx</string>
				<string>com.sysprogs.arm.kinetis.ucosii</string>
				<string>com.sysprogs.arm.kinetis.ucosiii</string>
			</IncompatibleFrameworks>
			<ProjectFolderName>Platform</ProjectFolderName>
			<DefaultEnabled>false</DefaultEnabled>
			<CopyJobs>
			</CopyJobs>
		</Framework>
		<Framework>
			<Name>Kinetis FreeRTOS</Name>
			<ID>com.sysprogs.arm.kinetis.freertos</ID>
			<IncompatibleFrameworks>
				<string>com.sysprogs.arm.kinetis.platform</string>
				<string>com.sysprogs.arm.kinetis.mqx</string>
				<string>com.sysprogs.arm.kinetis.ucosii</string>
				<string>com.sysprogs.arm.kinetis.ucosiii</string>
			</IncompatibleFrameworks>
			<ProjectFolderName>FreeRTOS</ProjectFolderName>
			<DefaultEnabled>false</DefaultEnabled>
			<CopyJobs>
				<CopyJob>
					<PreprocessorMacros>FSL_RTOS_FREE_RTOS</PreprocessorMacros>
					<SourceFolder>$$BSPGEN:INPUT_DIR$$\rtos\FreeRTOS</SourceFolder>
					<TargetFolder>RTOS\FreeRTOS</TargetFolder>
					<ProjectInclusionMask>-*\iar\*;-*\mdk\*;config\*.h;include\*.h;port\*.h;port\*.c;src\*.c;src\*.txt</ProjectInclusionMask>
					<FilesToCopy>*</FilesToCopy>
					<AdditionalIncludeDirs>.</AdditionalIncludeDirs>
					<AutoIncludeMask/>
					<Patches>
						<Patch xsi:type="InsertLines">
							<FilePath>port\gcc\port.c</FilePath>
							<AfterLine>#if configCPU_FAMILY==configCPU_FAMILY_ARM_M4F /* floating point unit */</AfterLine>
							<InsertedLines>
								<string>#ifndef __ARM_FP</string>
								<string>#error Hardware FP support is disabled. Please enable it via VisualGDB Project Properties or change configCPU_FAMILY to configCPU_FAMILY_ARM_M4</string>
								<string>#endif</string>
							</InsertedLines>
						</Patch>					
					</Patches>
				</CopyJob>
			</CopyJobs>
		</Framework>
		<Framework>
			<Name>Kinetis MQX</Name>
			<IncompatibleFrameworks>
				<string>com.sysprogs.arm.kinetis.platform</string>
				<string>com.sysprogs.arm.kinetis.freertos</string>
				<string>com.sysprogs.arm.kinetis.ucosii</string>
				<string>com.sysprogs.arm.kinetis.ucosiii</string>
			</IncompatibleFrameworks>
			<ID>com.sysprogs.arm.kinetis.mqx</ID>
			<ProjectFolderName>MQX</ProjectFolderName>
			<DefaultEnabled>false</DefaultEnabled>
			<CopyJobs>
				<CopyJob>
					<PreprocessorMacros>FSL_RTOS_MQX</PreprocessorMacros>
					<SourceFolder>$$BSPGEN:INPUT_DIR$$\rtos\mqx</SourceFolder>
					<TargetFolder>RTOS\mqx</TargetFolder>
					<ProjectInclusionMask>config\common\*;-mqx_stdlib\*;-config\*;*.h;*.c</ProjectInclusionMask>
					<FilesToCopy>-build\*;-*\build\*;-mqx\examples\*;*</FilesToCopy>
					<AdditionalIncludeDirs>.</AdditionalIncludeDirs>
					<AutoIncludeMask>-config\board\*;-config\mcu\*;*.h</AutoIncludeMask>
				</CopyJob>
			</CopyJobs>
		</Framework>
		<Framework>
			<Name>Kinetis uCOS II</Name>
			<IncompatibleFrameworks>
				<string>com.sysprogs.arm.kinetis.platform</string>
				<string>com.sysprogs.arm.kinetis.freertos</string>
				<string>com.sysprogs.arm.kinetis.mqx</string>
				<string>com.sysprogs.arm.kinetis.ucosiii</string>
			</IncompatibleFrameworks>
			<ID>com.sysprogs.arm.kinetis.ucosii</ID>
			<ProjectFolderName>uCOS</ProjectFolderName>
			<DefaultEnabled>false</DefaultEnabled>
			<CopyJobs>
				<CopyJob>
					<PreprocessorMacros>FSL_RTOS_UCOSII</PreprocessorMacros>
					<SourceFolder>$$BSPGEN:INPUT_DIR$$\rtos\uCOSII</SourceFolder>
					<TargetFolder>RTOS\uCOSII</TargetFolder>
					<ProjectInclusionMask>-src\config\*;*.h;*.c;*\os_cpu_a.S</ProjectInclusionMask>
					<FilesToCopy>-*\IAR\*;-*\RealView\*;-build\*;-*\build\*;-mqx\examples\*;*</FilesToCopy>
					<AdditionalIncludeDirs>.;$(BSP_ROOT)/RTOS/uCOSII/src/uCOS-II/Ports/ARM-Cortex-$$com.sysprogs.bspoptions.arm.core$$/Generic/GNU;$(BSP_ROOT)/RTOS/uCOSII/src/uC-CPU/ARM-Cortex-$$com.sysprogs.bspoptions.arm.core$$/GNU</AdditionalIncludeDirs>
					<AutoIncludeMask>-src\config\*;-*\ARM-Cortex-*;*</AutoIncludeMask>
					<SimpleFileConditions>
						<string>.*\\ARM-Cortex-M0\\.*: $$com.sysprogs.bspoptions.arm.core$$ == M0</string>
						<string>.*\\ARM-Cortex-M4\\.*: $$com.sysprogs.bspoptions.arm.core$$ == M4</string>
					</SimpleFileConditions>				
				</CopyJob>
			</CopyJobs>
		</Framework>
		<Framework>
			<Name>Kinetis uCOS III</Name>
			<ID>com.sysprogs.arm.kinetis.ucosiii</ID>
			<IncompatibleFrameworks>
				<string>com.sysprogs.arm.kinetis.platform</string>
				<string>com.sysprogs.arm.kinetis.freertos</string>
				<string>com.sysprogs.arm.kinetis.mqx</string>
				<string>com.sysprogs.arm.kinetis.ucosii</string>
			</IncompatibleFrameworks>
			<ProjectFolderName>uCOS</ProjectFolderName>
			<DefaultEnabled>false</DefaultEnabled>
			<CopyJobs>
				<CopyJob>
					<PreprocessorMacros>FSL_RTOS_UCOSIII</PreprocessorMacros>
					<SourceFolder>$$BSPGEN:INPUT_DIR$$\rtos\uCOSIII</SourceFolder>
					<TargetFolder>RTOS\uCOSIII</TargetFolder>
					<ProjectInclusionMask>-src\config\*;*.h;*.c;*\os_cpu_a.S;*\cpu_a.S</ProjectInclusionMask>
					<FilesToCopy>-*\IAR\*;-*\RealView\*;-build\*;-*\build\*;-mqx\examples\*;*</FilesToCopy>
					<AdditionalIncludeDirs>.;$(BSP_ROOT)/RTOS/uCOSIII/src/uCOS-III/Ports/ARM-Cortex-$$com.sysprogs.bspoptions.arm.core$$/Generic/GNU;$(BSP_ROOT)/RTOS/uCOSIII/src/uC-CPU/ARM-Cortex-$$com.sysprogs.bspoptions.arm.core$$/GNU</AdditionalIncludeDirs>
					<AutoIncludeMask>-src\config\*;-*\ARM-Cortex-*;*</AutoIncludeMask>
					<SimpleFileConditions>
						<string>.*\\ARM-Cortex-M0\\.*: $$com.sysprogs.bspoptions.arm.core$$ == M0</string>
						<string>.*\\ARM-Cortex-M4\\.*: $$com.sysprogs.bspoptions.arm.core$$ == M4</string>
					</SimpleFileConditions>				
				</CopyJob>
			</CopyJobs>
		</Framework>

	</AdditionalFrameworks>
	<SmartSamples>
		<SmartSample>
			<SourceFolder>$$BSPGEN:RULES_DIR$$\Samples\LEDBlink</SourceFolder>
			<DestinationFolder>Samples\LEDBlink</DestinationFolder>
		</SmartSample>
		<SmartSample>
			<SourceFolder>$$BSPGEN:RULES_DIR$$\Samples\LEDBlink(FreeRTOS)</SourceFolder>
			<DestinationFolder>Samples\LEDBlink(FreeRTOS)</DestinationFolder>
			<AdditionalSources>
				<string>$$SYS:BSP_ROOT$$/RTOS/FreeRTOS/config/$$SYS:FAMILY_ID$$/gcc/FreeRTOSConfig.h</string>
			</AdditionalSources>
		</SmartSample>
		<!-- MQX currently does not work out-of-the-box, so we don't want to show the corresponding sample -->
		<!-- 
		<SmartSample>
			<SourceFolder>$$BSPGEN:RULES_DIR$$\Samples\LEDBlink(MQX)</SourceFolder>
			<DestinationFolder>Samples\LEDBlink(MQX)</DestinationFolder>
		</SmartSample> -->
		<SmartSample>
			<SourceFolder>$$BSPGEN:RULES_DIR$$\Samples\LEDBlink(uCOSII)</SourceFolder>
			<DestinationFolder>Samples\LEDBlink(uCOSII)</DestinationFolder>
			<AdditionalSources>
				<string>$$SYS:BSP_ROOT$$/RTOS/uCOSII/src/config/app_cfg.h</string>
				<string>$$SYS:BSP_ROOT$$/RTOS/uCOSII/src/config/app_hooks.c</string>
				<string>$$SYS:BSP_ROOT$$/RTOS/uCOSII/src/config/cpu_cfg.h</string>
				<string>$$SYS:BSP_ROOT$$/RTOS/uCOSII/src/config/lib_cfg.h</string>
				<string>$$SYS:BSP_ROOT$$/RTOS/uCOSII/src/config/os_cfg.h</string>
			</AdditionalSources>
		</SmartSample>
		<SmartSample>
			<SourceFolder>$$BSPGEN:RULES_DIR$$\Samples\LEDBlink(uCOSIII)</SourceFolder>
			<DestinationFolder>Samples\LEDBlink(uCOSIII)</DestinationFolder>
			<AdditionalSources>
				<string>$$SYS:BSP_ROOT$$/RTOS/uCOSIII/src/config/app_cfg.h</string>
				<string>$$SYS:BSP_ROOT$$/RTOS/uCOSIII/src/config/cpu_cfg.h</string>
				<string>$$SYS:BSP_ROOT$$/RTOS/uCOSIII/src/config/lib_cfg.h</string>
				<string>$$SYS:BSP_ROOT$$/RTOS/uCOSIII/src/config/os_app_hooks.h</string>
				<string>$$SYS:BSP_ROOT$$/RTOS/uCOSIII/src/config/os_app_hooks.c</string>
				<string>$$SYS:BSP_ROOT$$/RTOS/uCOSIII/src/config/os_cfg.h</string>
				<string>$$SYS:BSP_ROOT$$/RTOS/uCOSIII/src/config/os_cfg_app.h</string>
			</AdditionalSources>
		</SmartSample>
	</SmartSamples>
</FamilyDefinition>